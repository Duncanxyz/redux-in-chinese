<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Redux 中文官网 Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Redux 中文官网 Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-66122997-1","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="Redux 中文官网" href="/opensearch.xml"><title data-react-helmet="true">Usage With TypeScript | Redux 中文官网</title><meta data-react-helmet="true" property="og:url" content="http://cn.redux.js.org/recipes/usage-with-typescript"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Usage With TypeScript | Redux 中文官网"><meta data-react-helmet="true" name="description" content="- Standard patterns for setting up a Redux app with TypeScript"><meta data-react-helmet="true" property="og:description" content="- Standard patterns for setting up a Redux app with TypeScript"><meta data-react-helmet="true" property="og:image" content="http://cn.redux.js.org/img/redux-logo-landscape.png"><meta data-react-helmet="true" name="twitter:image" content="http://cn.redux.js.org/img/redux-logo-landscape.png"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://cn.redux.js.org/recipes/usage-with-typescript"><link data-react-helmet="true" rel="alternate" href="http://cn.redux.js.org/recipes/usage-with-typescript" hreflang="en"><link data-react-helmet="true" rel="alternate" href="http://cn.redux.js.org/recipes/usage-with-typescript" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.a0cae3ae.css">
<link rel="preload" href="/assets/js/runtime~main.9044bd3c.js" as="script">
<link rel="preload" href="/assets/js/main.983ddc03.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Redux 中文官网</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/introduction/getting-started">入门</a><a class="navbar__item navbar__link" href="/tutorials/essentials/part-1-overview-concepts">教程</a><a class="navbar__item navbar__link" href="/api/api-reference">API</a><a class="navbar__item navbar__link" href="/faq">常见问题</a><a class="navbar__item navbar__link" href="/style-guide/style-guide">最佳实践</a><a href="https://www.github.com/camsong/redux-in-chinese" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">源码</a><a href="https://github.com/camsong/redux-in-chinese/issues" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">纠错</a><div class="react-toggle displayOnlyInLargeViewport_cxYs react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_iYfV">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Redux 中文官网</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/introduction/getting-started">入门</a></li><li class="menu__list-item"><a class="menu__link" href="/tutorials/essentials/part-1-overview-concepts">教程</a></li><li class="menu__list-item"><a class="menu__link" href="/api/api-reference">API</a></li><li class="menu__list-item"><a class="menu__link" href="/faq">常见问题</a></li><li class="menu__list-item"><a class="menu__link" href="/style-guide/style-guide">最佳实践</a></li><li class="menu__list-item"><a href="https://www.github.com/camsong/redux-in-chinese" target="_blank" rel="noopener noreferrer" class="menu__link">源码</a></li><li class="menu__list-item"><a href="https://github.com/camsong/redux-in-chinese/issues" target="_blank" rel="noopener noreferrer" class="menu__link">纠错</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_lDyR"><div class="docSidebarContainer_0YBq" role="complementary"><div class="sidebar_a3j0"><div class="menu menu--responsive thin-scrollbar menu_cyFh"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_iZzd" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">简介</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/getting-started">入门 Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/installation">安装</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/core-concepts">核心概念</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/learning-resources">学习资源</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/ecosystem">生态</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/introduction/examples">示例</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">教程</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/index">教程目录</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Redux 循序渐进</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/essentials/part-1-overview-concepts">基础概念</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/essentials/part-2-app-structure">应用结构</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/essentials/part-3-data-flow">数据流基础</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/essentials/part-4-using-data">使用数据</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/essentials/part-5-async-logic">异步逻辑与数据请求</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/essentials/part-6-performance-normalization">性能与数据范式化</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Redux 深入浅出</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/fundamentals/part-1-overview">Redux 概览</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/fundamentals/part-2-concepts-data-flow">Redux 概念与数据流</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/fundamentals/part-3-state-actions-reducers">State, Actions, and Reducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/fundamentals/part-4-store">Store</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/fundamentals/part-5-ui-react">UI and React</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/fundamentals/part-6-async-logic">Async Logic and Data Fetching</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/fundamentals/part-7-standard-patterns">标准 Redux 模式</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tutorials/fundamentals/part-8-modern-redux">Modern Redux with Redux Toolkit</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">技巧</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/recipe-index">技巧</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/configuring-your-store">配置 Store</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/recipes/usage-with-typescript">Usage with TypeScript</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/migrating-to-redux">迁移到 Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/using-object-spread-operator">使用对象展开运算符</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/reducing-boilerplate">减少样板代码</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/server-rendering">服务端渲染</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/writing-tests">编写测试</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/computing-derived-data">计算衍生数据</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/implementing-undo-history">实现撤销重做</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/isolating-redux-sub-apps">子应用隔离</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/code-splitting">代码分割</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/recipes/troubleshooting">Troubleshooting</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">组织 Reducers</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/structuring-reducers">组织 Reducer</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/prerequisite-concepts">Reducer 必备概念</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/basic-reducer-structure">Reducer 和 State 的基本结构</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/splitting-reducer-logic">拆分 Reducer 逻辑</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/refactoring-reducer-example">重构 Reducer：基于函数分解（Functional Decomposition）和 Reducer 组合</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/using-combinereducers">`combineReducers` 用法</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/beyond-combinereducers">`combineReducers` 进阶</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/normalizing-state-shape">State 范式化</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/updating-normalized-data">管理范式化数据</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/reusing-reducer-logic">Reducer 逻辑复用</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/immutable-update-patterns">Immutable 不可变更新模式</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/recipes/structuring-reducers/initializing-state">初始化 State</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">深入理解 Redux</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">像 Redux 一样思考</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/understanding/thinking-in-redux/motivation">动机</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/understanding/thinking-in-redux/three-principles">三大原则</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/understanding/thinking-in-redux/glossary">词汇表</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">历史与设计原则</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/understanding/history-and-design/prior-art">先前技术</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/understanding/history-and-design/middleware">Middleware 中间件</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">常见问题</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq">Redux FAQ</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/general">Redux FAQ: General</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/reducers">Redux FAQ: Reducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/organizing-state">Redux FAQ: Organizing State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/store-setup">Redux FAQ: Store Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/actions">Redux FAQ: Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/immutable-data">Redux FAQ: Immutable Data</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/code-structure">Redux FAQ: Code Structure</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/performance">Redux FAQ: Performance</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/design-decisions">Redux FAQ: Design Decisions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/react-redux">Redux FAQ: React Redux</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/faq/miscellaneous">Redux FAQ: Miscellaneous</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">编码规范</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/style-guide/style-guide">Style Guide: Best Practices</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">API 文档</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/api-reference">API Reference</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/createstore">createStore</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/store">Store</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/combinereducers">combineReducers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/applymiddleware">applyMiddleware</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/bindactioncreators">bindActionCreators</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/api/compose">compose</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Redux Toolkit</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/redux-toolkit/overview">Redux Toolkit: 概览</a></li></ul></li></ul></div></div></div><main class="docMainContainer_r8cw"><div class="container padding-vert--lg docItemWrapper_NJLN"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">Usage with TypeScript</h1></header><div class="markdown"><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>你将学到</h5></div><div class="admonition-content"><ul><li>Standard patterns for setting up a Redux app with TypeScript</li><li>Techniques for correctly typing portions of Redux logic</li></ul></div></div><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>必备能力</h5></div><div class="admonition-content"><ul><li>Understanding of <a href="https://www.typescriptlang.org/docs/handbook/typescript-in-5-minutes.html" target="_blank" rel="noopener noreferrer">TypeScript syntax and terms</a></li><li>Familiarity with TypeScript concepts like <a href="https://www.typescriptlang.org/docs/handbook/2/generics.html" target="_blank" rel="noopener noreferrer">generics</a> and <a href="https://www.typescriptlang.org/docs/handbook/utility-types.html" target="_blank" rel="noopener noreferrer">utility types</a></li><li>Knowledge of <a href="https://reactjs.org/docs/hooks-intro.html" target="_blank" rel="noopener noreferrer">React Hooks</a></li></ul></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="overview"></a>Overview<a class="hash-link" href="#overview" title="Direct link to heading">#</a></h2><p><strong>TypeScript</strong> is a typed superset of JavaScript that provides compile-time checking of source code. When used with Redux, TypeScript can help provide:</p><ol><li>Type safety for reducers, state and action creators, and UI components</li><li>Easy refactoring of typed code</li><li>A superior developer experience in a team environment</li></ol><p><a href="/style-guide/style-guide#use-static-typing"><strong>We strongly recommend using TypeScript in Redux applications</strong></a>. However, like all tools, TypeScript has tradeoffs. It adds complexity in terms of writing additional code, understanding TS syntax, and building the application. At the same time, it provides value by catching errors earlier in development, enabling safer and more efficient refactoring, and acting as documentation for existing source code.</p><p>We believe that <strong><a href="https://blog.isquaredsoftware.com/2019/11/blogged-answers-learning-and-using-typescript/#pragmatism-is-vital" target="_blank" rel="noopener noreferrer">pragmatic use of TypeScript</a> provides more than enough value and benefit to justify the added overhead</strong>, especially in larger codebases, but you should take time to <strong>evaluate the tradeoffs and decide whether it&#x27;s worth using TS in your own application</strong>.</p><p>There are multiple possible approaches to type checking Redux code. <strong>This page shows our standard recommended patterns for using Redux and TypeScript together</strong>, and is not an exhaustive guide. Following these patterns should result in a good TS usage experience, with <strong>the best tradeoffs between type safety and amount of type declarations you have to add to your codebase</strong>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="standard-redux-toolkit-project-setup-with-typescript"></a>Standard Redux Toolkit Project Setup with TypeScript<a class="hash-link" href="#standard-redux-toolkit-project-setup-with-typescript" title="Direct link to heading">#</a></h2><p>We assume that a typical Redux project is using Redux Toolkit and React Redux together.</p><p><a href="https://redux-toolkit.js.org" target="_blank" rel="noopener noreferrer">Redux Toolkit</a> (RTK) is the standard approach for writing modern Redux logic. RTK is already written in TypeScript, and its API is designed to provide a good experience for TypeScript usage.</p><p><a href="https://react-redux.js.org" target="_blank" rel="noopener noreferrer">React Redux</a> has its type definitions in a separate <a href="https://npm.im/@types/react-redux" target="_blank" rel="noopener noreferrer"><code>@types/react-redux</code> typedefs package</a> on NPM. In addition to typing the library functions, the types also export some helpers to make it easier to write typesafe interfaces between your Redux store and your React components.</p><p>As of React Redux v7.2.3, the <code>react-redux</code> package has a dependency on <code>@types/react-redux</code>, so the type definitions will be automatically installed with the library. Otherwise, you&#x27;ll need to manually install them yourself (typically <code>npm install @types/react-redux</code> ).</p><p>The <a href="https://github.com/reduxjs/cra-template-redux-typescript" target="_blank" rel="noopener noreferrer">Redux+TS template for Create-React-App</a> comes with a working example of these patterns already configured.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="define-root-state-and-dispatch-types"></a>Define Root State and Dispatch Types<a class="hash-link" href="#define-root-state-and-dispatch-types" title="Direct link to heading">#</a></h3><p>Using <a href="https://redux-toolkit.js.org/api/configureStore" target="_blank" rel="noopener noreferrer">configureStore</a> should not need any additional typings. You will, however, want to extract the <code>RootState</code> type and the <code>Dispatch</code> type so that they can be referenced as needed. Inferring these types from the store itself means that they correctly update as you add more state slices or modify middleware settings.</p><p>Since those are types, it&#x27;s safe to export them directly from your store setup file such as <code>app/store.ts</code> and import them directly into other files.</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">app/store.ts</div><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> configureStore </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;@reduxjs/toolkit&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// ...</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> store </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">configureStore</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  reducer</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    posts</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> postsReducer</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    comments</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> commentsReducer</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    users</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> usersReducer</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// Infer the `RootState` and `AppDispatch` types from the store itself</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">type</span><span class="token plain"> </span><span class="token class-name">RootState</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> ReturnType</span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token keyword" style="color:#F92672">typeof</span><span class="token plain"> store</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">getState</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// Inferred type: {posts: PostsState, comments: CommentsState, users: UsersState}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">type</span><span class="token plain"> </span><span class="token class-name">AppDispatch</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">typeof</span><span class="token plain"> store</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">dispatch</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="define-typed-hooks"></a>Define Typed Hooks<a class="hash-link" href="#define-typed-hooks" title="Direct link to heading">#</a></h3><p>While it&#x27;s possible to import the <code>RootState</code> and <code>AppDispatch</code> types into each component, it&#x27;s better to <strong>create pre-typed versions of the <code>useDispatch</code> and <code>useSelector</code> hooks for usage in your application</strong>. This is important for a couple reasons:</p><ul><li>For <code>useSelector</code>, it saves you the need to type <code>(state: RootState)</code> every time</li><li>For <code>useDispatch</code>, the default <code>Dispatch</code> type does not know about thunks or other middleware. In order to correctly dispatch thunks, you need to use the specific customized <code>AppDispatch</code> type from the store that includes the thunk middleware types, and use that with <code>useDispatch</code>. Adding a pre-typed <code>useDispatch</code> hook keeps you from forgetting to import <code>AppDispatch</code> where it&#x27;s needed.</li></ul><p>Since these are actual variables, not types, it&#x27;s important to define them in a separate file such as <code>app/hooks.ts</code>, not the store setup file. This allows you to import them into any component file that needs to use the hooks, and avoids potential circular import dependency issues.</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">app/hooks.ts</div><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> TypedUseSelectorHook</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> useDispatch</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> useSelector </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;react-redux&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> RootState</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> AppDispatch </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;./store&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// Use throughout your app instead of plain `useDispatch` and `useSelector`</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">useAppDispatch</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token generic-function function" style="color:#E6D874">useDispatch</span><span class="token generic-function generic class-name operator" style="color:#F8F8F2">&lt;</span><span class="token generic-function generic class-name">AppDispatch</span><span class="token generic-function generic class-name operator" style="color:#F8F8F2">&gt;</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> useAppSelector</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> TypedUseSelectorHook</span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token plain">RootState</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> useSelector</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="application-usage"></a>Application Usage<a class="hash-link" href="#application-usage" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="define-slice-state-and-action-types"></a>Define Slice State and Action Types<a class="hash-link" href="#define-slice-state-and-action-types" title="Direct link to heading">#</a></h3><p>Each slice file should define a type for its initial state value, so that <code>createSlice</code> can correctly infer the type of <code>state</code> in each case reducer.</p><p>All generated actions should be defined using the <code>PayloadAction&lt;T&gt;</code> type from Redux Toolkit, which takes the type of the <code>action.payload</code> field as its generic argument.</p><p>You can safely import the <code>RootState</code> type from the store file here. It&#x27;s a circular import, but the TypeScript compiler can correctly handle that for types. This may be needed for use cases like writing selector functions.</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">features/counter/counterSlice.ts</div><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> createSlice</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> PayloadAction </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;@reduxjs/toolkit&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> RootState </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;../../app/store&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// Define a type for the slice state</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">interface</span><span class="token plain"> </span><span class="token class-name">CounterState</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  value</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token builtin" style="color:#a6e22e">number</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// Define the initial state using that type</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token class-name keyword" style="color:#F92672">const</span><span class="token plain"> initialState</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> CounterState </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  value</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">0</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> counterSlice </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">createSlice</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  name</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;counter&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// `createSlice` will infer the state type from the `initialState` argument</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  initialState</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  reducers</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function-variable function" style="color:#E6D874">increment</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> state </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">value </span><span class="token operator" style="color:#F8F8F2">+=</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">1</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function-variable function" style="color:#E6D874">decrement</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> state </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">value </span><span class="token operator" style="color:#F8F8F2">-=</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">1</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#c6cad2">// Use the PayloadAction type to declare the contents of `action.payload`</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function-variable function" style="color:#E6D874">incrementByAmount</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> action</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> PayloadAction</span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token builtin" style="color:#a6e22e">number</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">value </span><span class="token operator" style="color:#F8F8F2">+=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">payload</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> increment</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> decrement</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> incrementByAmount </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> counterSlice</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">actions</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// Other code such as selectors can use the imported `RootState` type</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token class-name keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">selectCount</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> RootState</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">counter</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">value</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">default</span><span class="token plain"> counterSlice</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">reducer</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>The generated action creators will be correctly typed to accept a <code>payload</code> argument based on the <code>PayloadAction&lt;T&gt;</code> type you provided for the reducer. For example, <code>incrementByAmount</code> requires a <code>number</code> as its argument.</p><p>In some cases, <a href="https://github.com/reduxjs/redux-toolkit/pull/827" target="_blank" rel="noopener noreferrer">TypeScript may unnecessarily tighten the type of the initial state</a>. If that happens, you can work around it by casting the initial state using <code>as</code>, instead of declaring the type of the variable:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#c6cad2">// Workaround: cast state instead of declaring variable type</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> initialState </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  value</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">0</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">as</span><span class="token plain"> CounterState</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="use-typed-hooks-in-components"></a>Use Typed Hooks in Components<a class="hash-link" href="#use-typed-hooks-in-components" title="Direct link to heading">#</a></h3><p>In component files, import the pre-typed hooks instead of the standard hooks from React Redux.</p><div class="codeBlockContainer_J+bg"><div style="color:#f8f8f2;background-color:#272822" class="codeBlockTitle_oQzk">features/counter/Counter.tsx</div><div class="codeBlockContent_csEI tsx"><div tabindex="0" class="prism-code language-tsx codeBlock_rtdJ thin-scrollbar codeBlockWithTitle_ZT05"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#F8F8F2">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#F8F8F2">{</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;react&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#F8F8F2">{</span><span class="token imports"> useAppSelector</span><span class="token imports punctuation" style="color:#F8F8F2">,</span><span class="token imports"> useAppDispatch </span><span class="token imports punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;app/hooks&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#F8F8F2">{</span><span class="token imports"> decrement</span><span class="token imports punctuation" style="color:#F8F8F2">,</span><span class="token imports"> increment </span><span class="token imports punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;./counterSlice&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">Counter</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// The `state` arg is correctly typed as `RootState` already</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> count </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useAppSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">counter</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useAppDispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// omit rendering logic</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="typing-additional-redux-logic"></a>Typing Additional Redux Logic<a class="hash-link" href="#typing-additional-redux-logic" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="type-checking-reducers"></a>Type Checking Reducers<a class="hash-link" href="#type-checking-reducers" title="Direct link to heading">#</a></h3><p><a href="/tutorials/fundamentals/part-3-state-actions-reducers">Reducers</a> are pure functions that receive the current <code>state</code> and incoming <code>action</code> as arguments, and return a new state.</p><p>If you are using Redux Toolkit&#x27;s <code>createSlice</code>, you should rarely need to specifically type a reducer separately. If you do actually write a standalone reducer, it&#x27;s typically sufficient to declare the type of the <code>initialState</code> value, and type the <code>action</code> as <code>AnyAction</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> AnyAction </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;redux&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">interface</span><span class="token plain"> </span><span class="token class-name">CounterState</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  value</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token builtin" style="color:#a6e22e">number</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> initialState</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> CounterState </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  value</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">0</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">default</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">counterReducer</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  state </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> initialState</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  action</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> AnyAction</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// logic here</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>However, the Redux core does export a <code>Reducer&lt;State, Action&gt;</code> type you can use as well.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="type-checking-middleware"></a>Type Checking Middleware<a class="hash-link" href="#type-checking-middleware" title="Direct link to heading">#</a></h3><p><a href="/tutorials/fundamentals/part-4-store#middleware">Middleware</a> are an extension mechanism for the Redux store. Middleware are composed into a pipeline that wrap the store&#x27;s <code>dispatch</code> method, and have access to the store&#x27;s <code>dispatch</code> and <code>getState</code> methods.</p><p>The Redux core exports a <code>Middleware</code> type that can be used to correctly type a middleware function:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">interface</span><span class="token plain"> </span><span class="token class-name">Middleware</span><span class="token class-name operator" style="color:#F8F8F2">&lt;</span><span class="token class-name"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token class-name">  DispatchExt </span><span class="token class-name operator" style="color:#F8F8F2">=</span><span class="token class-name"> </span><span class="token class-name punctuation" style="color:#F8F8F2">{</span><span class="token class-name punctuation" style="color:#F8F8F2">}</span><span class="token class-name punctuation" style="color:#F8F8F2">,</span><span class="token class-name"> </span><span class="token class-name comment" style="color:#c6cad2">// optional override return behavior of `dispatch`</span><span class="token class-name"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token class-name">  </span><span class="token class-name constant" style="color:#F92672">S</span><span class="token class-name"> </span><span class="token class-name operator" style="color:#F8F8F2">=</span><span class="token class-name"> </span><span class="token class-name builtin" style="color:#a6e22e">any</span><span class="token class-name punctuation" style="color:#F8F8F2">,</span><span class="token class-name"> </span><span class="token class-name comment" style="color:#c6cad2">// type of the Redux store state</span><span class="token class-name"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token class-name">  </span><span class="token class-name constant" style="color:#F92672">D</span><span class="token class-name"> </span><span class="token class-name keyword" style="color:#F92672">extends</span><span class="token class-name"> Dispatch </span><span class="token class-name operator" style="color:#F8F8F2">=</span><span class="token class-name"> Dispatch </span><span class="token class-name comment" style="color:#c6cad2">// type of the dispatch method</span><span class="token class-name"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token class-name"></span><span class="token class-name operator" style="color:#F8F8F2">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>A custom middleware should use the <code>Middleware</code> type, and pass the generic args for <code>S</code> (state) and <code>D</code> (dispatch) if needed:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> Middleware </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;redux&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> RootState </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;../store&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> exampleMiddleware</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> Middleware</span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token comment" style="color:#c6cad2">// Most middleware do not modify the dispatch return value</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  RootState</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> storeApi </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> next </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> action </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> state </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> storeApi</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token function" style="color:#E6D874">getState</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token comment" style="color:#c6cad2">// correctly typed as RootState</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>The dispatch generic should likely only be needed if you are dispatching additional thunks within the middleware.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="type-checking-redux-thunks"></a>Type Checking Redux Thunks<a class="hash-link" href="#type-checking-redux-thunks" title="Direct link to heading">#</a></h3><p><a href="https://github.com/reduxjs/redux-thunk" target="_blank" rel="noopener noreferrer">Redux Thunk</a> is the standard middleware for writing sync and async logic that interacts with the Redux store. A thunk function receives <code>dispatch</code> and <code>getState</code> as its parameters. Redux Thunk has a built in <code>ThunkAction</code> type which we can use to define types for those arguments:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">type</span><span class="token plain"> </span><span class="token class-name">ThunkAction</span><span class="token class-name operator" style="color:#F8F8F2">&lt;</span><span class="token class-name"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token class-name">  </span><span class="token class-name constant" style="color:#F92672">R</span><span class="token class-name punctuation" style="color:#F8F8F2">,</span><span class="token class-name"> </span><span class="token class-name comment" style="color:#c6cad2">// Return type of the thunk function</span><span class="token class-name"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token class-name">  </span><span class="token class-name constant" style="color:#F92672">S</span><span class="token class-name punctuation" style="color:#F8F8F2">,</span><span class="token class-name"> </span><span class="token class-name comment" style="color:#c6cad2">// state type used by getState</span><span class="token class-name"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token class-name">  </span><span class="token class-name constant" style="color:#F92672">E</span><span class="token class-name punctuation" style="color:#F8F8F2">,</span><span class="token class-name"> </span><span class="token class-name comment" style="color:#c6cad2">// any &quot;extra argument&quot; injected into the thunk</span><span class="token class-name"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token class-name">  </span><span class="token class-name constant" style="color:#F92672">A</span><span class="token class-name"> </span><span class="token class-name keyword" style="color:#F92672">extends</span><span class="token class-name"> Action </span><span class="token class-name comment" style="color:#c6cad2">// known types of actions that can be dispatched</span><span class="token class-name"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token class-name"></span><span class="token class-name operator" style="color:#F8F8F2">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">dispatch</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> ThunkDispatch</span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token constant" style="color:#F92672">S</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token constant" style="color:#F92672">E</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token constant" style="color:#F92672">A</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">getState</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#F92672">S</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> extraArgument</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token constant" style="color:#F92672">E</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token constant" style="color:#F92672">R</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>You will typically want to provide the <code>R</code> (return type) and <code>S</code> (state) generic arguments. Unfortunately, TS does not allow only providing <em>some</em> generic arguments, so the usual values for the other arguments are <code>unknown</code> for <code>E</code> and <code>AnyAction</code> for <code>A</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> AnyAction </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;redux&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> sendMessage </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;./store/chat/actions&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> RootState </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;./store&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> ThunkAction </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;redux-thunk&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> thunkSendMessage </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">message</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token builtin" style="color:#a6e22e">string</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> ThunkAction</span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token keyword" style="color:#F92672">void</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> RootState</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token builtin" style="color:#a6e22e">unknown</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> AnyAction</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">async</span><span class="token plain"> dispatch </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> asyncResp </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">await</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">exampleAPI</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token function" style="color:#E6D874">sendMessage</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        message</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        user</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> asyncResp</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        timestamp</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token function" style="color:#E6D874">getTime</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">exampleAPI</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">return</span><span class="token plain"> </span><span class="token builtin" style="color:#a6e22e">Promise</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token function" style="color:#E6D874">resolve</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token string" style="color:#a6e22e">&#x27;Async Chat Bot&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>To reduce repetition, you might want to define a reusable <code>AppThunk</code> type once, in your store file, and then use that type whenever you write a thunk:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">type</span><span class="token plain"> </span><span class="token class-name">AppThunk</span><span class="token class-name operator" style="color:#F8F8F2">&lt;</span><span class="token class-name">ReturnType </span><span class="token class-name operator" style="color:#F8F8F2">=</span><span class="token class-name"> </span><span class="token class-name keyword" style="color:#F92672">void</span><span class="token class-name operator" style="color:#F8F8F2">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> ThunkAction</span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  ReturnType</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  RootState</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token builtin" style="color:#a6e22e">unknown</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  AnyAction</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token operator" style="color:#F8F8F2">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Note that this assumes that there is no meaningful return value from the thunk. If your thunk returns a promise and you want to <a href="/tutorials/essentials/part-5-async-logic#checking-thunk-results-in-components">use the returned promise after dispatching the thunk</a>, you&#x27;d want to use this as <code>AppThunk&lt;Promise&lt;SomeReturnType&gt;&gt;</code>.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Don&#x27;t forget that <strong>the default <code>useDispatch</code> hook does not know about thunks</strong>, and so dispatching a thunk will cause a type error. Be sure to <a href="#define-root-state-and-dispatch-types">use an updated form of <code>Dispatch</code> in your components that recognizes thunks as an acceptable type to dispatch</a>.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="usage-with-react-redux"></a>Usage with React Redux<a class="hash-link" href="#usage-with-react-redux" title="Direct link to heading">#</a></h2><p>While <a href="https://react-redux.js.org" target="_blank" rel="noopener noreferrer">React Redux</a> is a separate library from Redux itself, it is commonly used with React.</p><p>For a complete guide on how to correctly use React Redux with TypeScript, see <strong><a href="https://react-redux.js.org/using-react-redux/static-typing" target="_blank" rel="noopener noreferrer">the &quot;Static Typing&quot; page in the React Redux docs</a></strong>. This section will highlight the standard patterns.</p><p>As mentioned above, React Redux doesn&#x27;t ship with its own type definitions. If you are using TypeScript you should install the <a href="https://npm.im/@types/react-redux" target="_blank" rel="noopener noreferrer"><code>@types/react-redux</code> type definitions</a> from npm.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="typing-the-useselector-hook"></a>Typing the <code>useSelector</code> hook<a class="hash-link" href="#typing-the-useselector-hook" title="Direct link to heading">#</a></h3><p>Declare the type of the <code>state</code> parameter in the selector function, and the return type of <code>useSelector</code> will be inferred to match the return type of the selector:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">interface</span><span class="token plain"> </span><span class="token class-name">RootState</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  isOn</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token builtin" style="color:#a6e22e">boolean</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// TS infers type: (state: RootState) =&gt; boolean</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">selectIsOn</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> RootState</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">isOn</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// TS infers `isOn` is boolean</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> isOn </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">selectIsOn</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>This can also be done inline as well:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> isOn </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useSelector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> RootState</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">isOn</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>However, prefer creating a pre-typed <code>useSelector</code> hook with the correct type of <code>state</code> built-in instead.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="typing-the-usedispatch-hook"></a>Typing the <code>useDispatch</code> hook<a class="hash-link" href="#typing-the-usedispatch-hook" title="Direct link to heading">#</a></h3><p>By default, the return value of <code>useDispatch</code> is the standard <code>Dispatch</code> type defined by the Redux core types, so no declarations are needed:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">useDispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>However, prefer creating a pre-typed <code>useAppDispatch</code> hook with the correct type of <code>Dispatch</code> built-in instead.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="typing-the-connect-higher-order-component"></a>Typing the <code>connect</code> higher order component<a class="hash-link" href="#typing-the-connect-higher-order-component" title="Direct link to heading">#</a></h3><p>If you are still using <code>connect</code>, you should use the <code>ConnectedProps&lt;T&gt;</code> type exported by <code>@types/react-redux^7.1.2</code> to infer the types of the props from <code>connect</code> automatically. This requires splitting the <code>connect(mapState, mapDispatch)(MyComponent)</code> call into two parts:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI tsx"><div tabindex="0" class="prism-code language-tsx codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#F8F8F2">{</span><span class="token imports"> connect</span><span class="token imports punctuation" style="color:#F8F8F2">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">ConnectedProps</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">from</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;react-redux&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">interface</span><span class="token plain"> </span><span class="token class-name">RootState</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  isOn</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token builtin" style="color:#a6e22e">boolean</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">mapState</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token maybe-class-name">RootState</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  isOn</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">isOn</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> mapDispatch </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function-variable function" style="color:#E6D874">toggleOn</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> type</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;TOGGLE_IS_ON&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> connector </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">connect</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">mapState</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> mapDispatch</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// The inferred type will look like:</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// {isOn: boolean, toggleOn: () =&gt; void}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">type</span><span class="token plain"> </span><span class="token class-name">PropsFromRedux</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token maybe-class-name">ConnectedProps</span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token keyword" style="color:#F92672">typeof</span><span class="token plain"> connector</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">type</span><span class="token plain"> </span><span class="token class-name">Props</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token maybe-class-name">PropsFromRedux</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  backgroundColor</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token builtin" style="color:#a6e22e">string</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#E6D874">MyComponent</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">props</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token maybe-class-name">Props</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;</span><span class="token tag" style="color:#F92672">div</span><span class="token tag" style="color:#F92672"> </span><span class="token tag attr-name" style="color:#a6e22e">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript" style="color:#F92672"> backgroundColor</span><span class="token tag script language-javascript operator" style="color:#F8F8F2">:</span><span class="token tag script language-javascript" style="color:#F92672"> props</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">.</span><span class="token tag script language-javascript property-access" style="color:#F92672">backgroundColor</span><span class="token tag script language-javascript" style="color:#F92672"> </span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain-text"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;</span><span class="token tag" style="color:#F92672">button</span><span class="token tag" style="color:#F92672"> </span><span class="token tag attr-name" style="color:#a6e22e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#F8F8F2">=</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">{</span><span class="token tag script language-javascript" style="color:#F92672">props</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">.</span><span class="token tag script language-javascript property-access" style="color:#F92672">toggleOn</span><span class="token tag script language-javascript punctuation" style="color:#F8F8F2">}</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain-text"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain-text">      Toggle is </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain">props</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token property-access">isOn</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">?</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;ON&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;OFF&#x27;</span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain-text"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;/</span><span class="token tag" style="color:#F92672">button</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain-text"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#F8F8F2">&lt;/</span><span class="token tag" style="color:#F92672">div</span><span class="token tag punctuation" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">default</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">connector</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token maybe-class-name">MyComponent</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="usage-with-redux-toolkit"></a>Usage with Redux Toolkit<a class="hash-link" href="#usage-with-redux-toolkit" title="Direct link to heading">#</a></h2><p>The <a href="#standard-redux-toolkit-project-setup-with-typescript">Standard Redux Toolkit Project Setup with TypeScript</a> section already covered the normal usage patterns for <code>configureStore</code> and <code>createSlice</code>, and the <a href="https://redux-toolkit.js.org/usage/usage-with-typescript" target="_blank" rel="noopener noreferrer">Redux Toolkit &quot;Usage with TypeScript&quot; page</a> covers all of the RTK APIs in detail.</p><p>Here are some additional typing patterns you will commonly see when using RTK.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="typing-configurestore"></a>Typing <code>configureStore</code><a class="hash-link" href="#typing-configurestore" title="Direct link to heading">#</a></h3><p><code>configureStore</code> infers the type of the state value from the provided root reducer function, so no specific type declarations should be needed.</p><p>If you want to add additional middleware to the store, be sure to use the specialized <code>.concat()</code> and <code>.prepend()</code> methods included in the array returned by <code>getDefaultMiddleware()</code>, as those will correctly preserve the types of the middleware you&#x27;re adding. (Using plain JS array spreads often loses those types.)</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> store </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">configureStore</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  reducer</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> rootReducer</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function-variable function" style="color:#E6D874">middleware</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> getDefaultMiddleware </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#E6D874">getDefaultMiddleware</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token function" style="color:#E6D874">prepend</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token comment" style="color:#c6cad2">// correctly typed middlewares can just be used</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        additionalMiddleware</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token comment" style="color:#c6cad2">// you can also type middlewares manually</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        untypedMiddleware </span><span class="token keyword" style="color:#F92672">as</span><span class="token plain"> Middleware</span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">action</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> Action</span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token string" style="color:#a6e22e">&#x27;specialAction&#x27;</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token builtin" style="color:#a6e22e">number</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          RootState</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// prepend and concat calls can be chained</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token function" style="color:#E6D874">concat</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">logger</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="matching-actions"></a>Matching Actions<a class="hash-link" href="#matching-actions" title="Direct link to heading">#</a></h3><p>RTK-generated action creators have a <code>match</code> method that acts as a <a href="https://www.typescriptlang.org/docs/handbook/2/narrowing.html#using-type-predicates" target="_blank" rel="noopener noreferrer">type predicate</a>. Calling <code>someActionCreator.match(action)</code> will do a string comparison against the <code>action.type</code> string, and if used as a condition, narrow the type of <code>action</code> down to be the correct TS type:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> increment </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:#E6D874">createAction</span><span class="token generic-function generic class-name operator" style="color:#F8F8F2">&lt;</span><span class="token generic-function generic class-name builtin" style="color:#a6e22e">number</span><span class="token generic-function generic class-name operator" style="color:#F8F8F2">&gt;</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token string" style="color:#a6e22e">&#x27;increment&#x27;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">function</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">test</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">action</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> Action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">increment</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token function" style="color:#E6D874">match</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#c6cad2">// action.payload inferred correctly here</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> num </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">5</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">+</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">payload</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>This is particularly useful when checking for action types in Redux middleware, such as custom middleware, <code>redux-observable</code>, and RxJS&#x27;s <code>filter</code> method.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="typing-createslice"></a>Typing <code>createSlice</code><a class="hash-link" href="#typing-createslice" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="defining-separate-case-reducers"></a>Defining Separate Case Reducers<a class="hash-link" href="#defining-separate-case-reducers" title="Direct link to heading">#</a></h4><p>If you have too many case reducers and defining them inline would be messy, or you want to reuse case reducers across slices, you can also define them outside the <code>createSlice</code> call and type them as <code>CaseReducer</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">type</span><span class="token plain"> </span><span class="token class-name">State</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token builtin" style="color:#a6e22e">number</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> increment</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> CaseReducer</span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token plain">State</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> PayloadAction</span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token builtin" style="color:#a6e22e">number</span><span class="token operator" style="color:#F8F8F2">&gt;&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  state </span><span class="token operator" style="color:#F8F8F2">+</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">payload</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#E6D874">createSlice</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  name</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;test&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  initialState</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token number" style="color:#AE81FF">0</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  reducers</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    increment</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="typing-extrareducers"></a>Typing <code>extraReducers</code><a class="hash-link" href="#typing-extrareducers" title="Direct link to heading">#</a></h4><p>If you are adding an <code>extraReducers</code> field in <code>createSlice</code>, be sure to use the &quot;builder callback&quot; form, as the &quot;plain object&quot; form cannot infer action types correctly. Passing an RTK-generated action creator to <code>builder.addCase()</code> will correctly infer the type of the <code>action</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> usersSlice </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">createSlice</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  name</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;users&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  initialState</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  reducers</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#c6cad2">// fill in primary logic here</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function-variable function" style="color:#E6D874">extraReducers</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> builder </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    builder</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token function" style="color:#E6D874">addCase</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">fetchUserById</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">pending</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// both `state` and `action` are now correctly typed</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token comment" style="color:#c6cad2">// based on the slice state and the `pending` action creator</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="typing-prepare-callbacks"></a>Typing <code>prepare</code> Callbacks<a class="hash-link" href="#typing-prepare-callbacks" title="Direct link to heading">#</a></h4><p>If you want to add a <code>meta</code> or <code>error</code> property to your action, or customize the <code>payload</code> of your action, you have to use the <code>prepare</code> notation for defining the case reducer. Using this notation with TypeScript looks like:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> blogSlice </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">createSlice</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  name</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;blogData&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  initialState</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  reducers</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    receivedAll</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token function" style="color:#E6D874">reducer</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        action</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> PayloadAction</span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token plain">Page</span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token builtin" style="color:#a6e22e">string</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> currentPage</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token builtin" style="color:#a6e22e">number</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">all </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">payload</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        state</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">meta </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">meta</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token function" style="color:#E6D874">prepare</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">payload</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> Page</span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> currentPage</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token builtin" style="color:#a6e22e">number</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">        </span><span class="token keyword" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> payload</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> meta</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> currentPage </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">      </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="fixing-circular-types-in-exported-slices"></a>Fixing Circular Types in Exported Slices<a class="hash-link" href="#fixing-circular-types-in-exported-slices" title="Direct link to heading">#</a></h4><p>Finally, on rare occasions you might need to export the slice reducer with a specific type in order to break a circular type dependency problem. This might look like:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">export</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">default</span><span class="token plain"> counterSlice</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">reducer </span><span class="token keyword" style="color:#F92672">as</span><span class="token plain"> Reducer</span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token plain">Counter</span><span class="token operator" style="color:#F8F8F2">&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="typing-createasyncthunk"></a>Typing <code>createAsyncThunk</code><a class="hash-link" href="#typing-createasyncthunk" title="Direct link to heading">#</a></h3><p>For basic usage, the only type you need to provide for <code>createAsyncThunk</code> is the type of the single argument for your payload creation callback. You should also ensure that the return value of the callback is typed correctly:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> fetchUserById </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">createAsyncThunk</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token string" style="color:#a6e22e">&#x27;users/fetchById&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// Declare the type your function argument here:</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">userId</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token builtin" style="color:#a6e22e">number</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> response </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">await</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">fetch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token template-string string" style="color:#a6e22e">https://reqres.in/api/users/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#F8F8F2">${</span><span class="token template-string interpolation">userId</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#F8F8F2">}</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#c6cad2">// Inferred return type: Promise&lt;MyData&gt;</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token keyword" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token keyword" style="color:#F92672">await</span><span class="token plain"> response</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token function" style="color:#E6D874">json</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">as</span><span class="token plain"> MyData</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// the parameter of `fetchUserById` is automatically inferred to `number` here</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// and dispatching the resulting thunkAction will return a Promise of a correctly</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#c6cad2">// typed &quot;fulfilled&quot; or &quot;rejected&quot; action.</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> lastReturnedAction </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">await</span><span class="token plain"> store</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token function" style="color:#E6D874">dispatch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token function" style="color:#E6D874">fetchUserById</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token number" style="color:#AE81FF">3</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>If you need to modify the types of the <code>thunkApi</code> parameter, such as supplying the type of the <code>state</code> returned by <code>getState()</code>, you must supply the first two generic arguments for return type and payload argument, plus whicher &quot;thunkApi argument fields&quot; are relevant in an object:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> fetchUserById </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:#E6D874">createAsyncThunk</span><span class="token generic-function generic class-name operator" style="color:#F8F8F2">&lt;</span><span class="token generic-function generic class-name"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token generic-function generic class-name">  </span><span class="token generic-function generic class-name comment" style="color:#c6cad2">// Return type of the payload creator</span><span class="token generic-function generic class-name"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token generic-function generic class-name">  MyData</span><span class="token generic-function generic class-name punctuation" style="color:#F8F8F2">,</span><span class="token generic-function generic class-name"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token generic-function generic class-name">  </span><span class="token generic-function generic class-name comment" style="color:#c6cad2">// First argument to the payload creator</span><span class="token generic-function generic class-name"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token generic-function generic class-name">  </span><span class="token generic-function generic class-name builtin" style="color:#a6e22e">number</span><span class="token generic-function generic class-name punctuation" style="color:#F8F8F2">,</span><span class="token generic-function generic class-name"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token generic-function generic class-name">  </span><span class="token generic-function generic class-name punctuation" style="color:#F8F8F2">{</span><span class="token generic-function generic class-name"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token generic-function generic class-name">    </span><span class="token generic-function generic class-name comment" style="color:#c6cad2">// Optional fields for defining thunkApi field types</span><span class="token generic-function generic class-name"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token generic-function generic class-name">    dispatch</span><span class="token generic-function generic class-name operator" style="color:#F8F8F2">:</span><span class="token generic-function generic class-name"> AppDispatch</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token generic-function generic class-name">    state</span><span class="token generic-function generic class-name operator" style="color:#F8F8F2">:</span><span class="token generic-function generic class-name"> State</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token generic-function generic class-name">    extra</span><span class="token generic-function generic class-name operator" style="color:#F8F8F2">:</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name punctuation" style="color:#F8F8F2">{</span><span class="token generic-function generic class-name"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token generic-function generic class-name">      jwt</span><span class="token generic-function generic class-name operator" style="color:#F8F8F2">:</span><span class="token generic-function generic class-name"> </span><span class="token generic-function generic class-name builtin" style="color:#a6e22e">string</span><span class="token generic-function generic class-name"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token generic-function generic class-name">    </span><span class="token generic-function generic class-name punctuation" style="color:#F8F8F2">}</span><span class="token generic-function generic class-name"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token generic-function generic class-name">  </span><span class="token generic-function generic class-name punctuation" style="color:#F8F8F2">}</span><span class="token generic-function generic class-name"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token generic-function generic class-name"></span><span class="token generic-function generic class-name operator" style="color:#F8F8F2">&gt;</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token string" style="color:#a6e22e">&#x27;users/fetchById&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">userId</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> thunkApi</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> response </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">await</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">fetch</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token template-string string" style="color:#a6e22e">https://reqres.in/api/users/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#F8F8F2">${</span><span class="token template-string interpolation">userId</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#F8F8F2">}</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    headers</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      Authorization</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token template-string string" style="color:#a6e22e">Bearer </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#F8F8F2">${</span><span class="token template-string interpolation">thunkApi</span><span class="token template-string interpolation punctuation" style="color:#F8F8F2">.</span><span class="token template-string interpolation">extra</span><span class="token template-string interpolation punctuation" style="color:#F8F8F2">.</span><span class="token template-string interpolation">jwt</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#F8F8F2">}</span><span class="token template-string template-punctuation string" style="color:#a6e22e">`</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token keyword" style="color:#F92672">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token keyword" style="color:#F92672">await</span><span class="token plain"> response</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token function" style="color:#E6D874">json</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token keyword" style="color:#F92672">as</span><span class="token plain"> MyData</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="typing-createentityadapter"></a>Typing <code>createEntityAdapter</code><a class="hash-link" href="#typing-createentityadapter" title="Direct link to heading">#</a></h3><p>Typing <code>createEntityAdapter</code> only requires you to specify the entity type as the single generic argument. This typically looks like:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI ts"><div tabindex="0" class="prism-code language-ts codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#272822"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#F92672">interface</span><span class="token plain"> </span><span class="token class-name">Book</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  bookId</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token builtin" style="color:#a6e22e">number</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  title</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token builtin" style="color:#a6e22e">string</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// ...</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> booksAdapter </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token generic-function function" style="color:#E6D874">createEntityAdapter</span><span class="token generic-function generic class-name operator" style="color:#F8F8F2">&lt;</span><span class="token generic-function generic class-name">Book</span><span class="token generic-function generic class-name operator" style="color:#F8F8F2">&gt;</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function-variable function" style="color:#E6D874">selectId</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> book </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> book</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">bookId</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token function-variable function" style="color:#E6D874">sortComparer</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">a</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token operator" style="color:#F8F8F2">=&gt;</span><span class="token plain"> a</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">title</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token function" style="color:#E6D874">localeCompare</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">b</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">title</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#F92672">const</span><span class="token plain"> booksSlice </span><span class="token operator" style="color:#F8F8F2">=</span><span class="token plain"> </span><span class="token function" style="color:#E6D874">createSlice</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  name</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token string" style="color:#a6e22e">&#x27;books&#x27;</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#c6cad2">// The type of the state is inferred here</span><span class="token plain"></span></div><div class="token-line docusaurus-highlight-code-line" style="color:#f8f8f2"><span class="token plain">  initialState</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> booksAdapter</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token function" style="color:#E6D874">getInitialState</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  reducers</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    bookAdded</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> booksAdapter</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">addOne</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token function" style="color:#E6D874">booksReceived</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> action</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> PayloadAction</span><span class="token operator" style="color:#F8F8F2">&lt;</span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"> books</span><span class="token operator" style="color:#F8F8F2">:</span><span class="token plain"> Book</span><span class="token punctuation" style="color:#F8F8F2">[</span><span class="token punctuation" style="color:#F8F8F2">]</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token operator" style="color:#F8F8F2">&gt;</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#F8F8F2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      booksAdapter</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token function" style="color:#E6D874">setAll</span><span class="token punctuation" style="color:#F8F8F2">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#F8F8F2">,</span><span class="token plain"> action</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">payload</span><span class="token punctuation" style="color:#F8F8F2">.</span><span class="token plain">books</span><span class="token punctuation" style="color:#F8F8F2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#F8F8F2">}</span><span class="token punctuation" style="color:#F8F8F2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="additional-recommendations"></a>Additional Recommendations<a class="hash-link" href="#additional-recommendations" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="use-the-react-redux-hooks-api"></a>Use the React Redux Hooks API<a class="hash-link" href="#use-the-react-redux-hooks-api" title="Direct link to heading">#</a></h3><p><strong>We recommend using the React Redux hooks API as the default approach</strong>. The hooks API is much simpler to use with TypeScript, as <code>useSelector</code> is a simple hook that takes a selector function, and the return type is easily inferred from the type of the <code>state</code> argument.</p><p>While <code>connect</code> still works fine, and <em>can</em> be typed, it&#x27;s much more difficult to type correctly.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="avoid-action-type-unions"></a>Avoid Action Type Unions<a class="hash-link" href="#avoid-action-type-unions" title="Direct link to heading">#</a></h3><p><strong>We specifically recommend <em>against</em> trying to create unions of action types</strong>, as it provides no real benefit and actually misleads the compiler in some ways. See RTK maintainer Lenz Weber&#x27;s post <a href="https://phryneas.de/redux-typescript-no-discriminating-union" target="_blank" rel="noopener noreferrer">Do Not Create Union Types with Redux Action Types</a> for an explanation of why this is a problem.</p><p>In addition, if you&#x27;re using <code>createSlice</code>, you already know that all actions defined by that slice are being handled correctly.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="resources"></a>Resources<a class="hash-link" href="#resources" title="Direct link to heading">#</a></h2><p>For further information, see these additional resources:</p><ul><li>Redux library documentation:<ul><li><a href="https://react-redux.js.org/using-react-redux/static-typing" target="_blank" rel="noopener noreferrer">React Redux docs: Static Typing</a>: Examples of how to use the React Redux APIs with TypeScript</li><li><a href="https://redux-toolkit.js.org/usage/usage-with-typescript" target="_blank" rel="noopener noreferrer">Redux Toolkit docs: Usage with TypeScript</a>: Examples of how to use the Redux Toolkit APIs with TypeScript</li></ul></li><li>React + Redux + TypeScript guides:<ul><li><a href="https://github.com/typescript-cheatsheets/react-typescript-cheatsheet" target="_blank" rel="noopener noreferrer">React+TypeScript Cheatsheet</a>: a comprehensive guide to using React with TypeScript</li><li><a href="https://github.com/piotrwitek/react-redux-typescript-guide" target="_blank" rel="noopener noreferrer">React + Redux in TypeScript Guide</a>: extensive information on patterns for using React and Redux with TypeScript<ul><li><em>Note: while this guide has some useful info, many of the patterns it shows go against our recommended practices shown in this page, such as using action type unions. We link this out of completeness</em></li></ul></li></ul></li><li>Other articles:<ul><li><a href="https://phryneas.de/redux-typescript-no-discriminating-union" target="_blank" rel="noopener noreferrer">Do Not Create Union Types with Redux Action Types</a></li><li><a href="https://www.matthewgerstman.com/tech/redux-code-split-typecheck/" target="_blank" rel="noopener noreferrer">Redux with Code-Splitting and Type Checking</a></li></ul></li></ul></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/recipes/configuring-your-store"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 配置 Store</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/recipes/migrating-to-redux"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">迁移到 Redux »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link">Overview</a></li><li><a href="#standard-redux-toolkit-project-setup-with-typescript" class="table-of-contents__link">Standard Redux Toolkit Project Setup with TypeScript</a><ul><li><a href="#define-root-state-and-dispatch-types" class="table-of-contents__link">Define Root State and Dispatch Types</a></li><li><a href="#define-typed-hooks" class="table-of-contents__link">Define Typed Hooks</a></li></ul></li><li><a href="#application-usage" class="table-of-contents__link">Application Usage</a><ul><li><a href="#define-slice-state-and-action-types" class="table-of-contents__link">Define Slice State and Action Types</a></li><li><a href="#use-typed-hooks-in-components" class="table-of-contents__link">Use Typed Hooks in Components</a></li></ul></li><li><a href="#typing-additional-redux-logic" class="table-of-contents__link">Typing Additional Redux Logic</a><ul><li><a href="#type-checking-reducers" class="table-of-contents__link">Type Checking Reducers</a></li><li><a href="#type-checking-middleware" class="table-of-contents__link">Type Checking Middleware</a></li><li><a href="#type-checking-redux-thunks" class="table-of-contents__link">Type Checking Redux Thunks</a></li></ul></li><li><a href="#usage-with-react-redux" class="table-of-contents__link">Usage with React Redux</a><ul><li><a href="#typing-the-useselector-hook" class="table-of-contents__link">Typing the <code>useSelector</code> hook</a></li><li><a href="#typing-the-usedispatch-hook" class="table-of-contents__link">Typing the <code>useDispatch</code> hook</a></li><li><a href="#typing-the-connect-higher-order-component" class="table-of-contents__link">Typing the <code>connect</code> higher order component</a></li></ul></li><li><a href="#usage-with-redux-toolkit" class="table-of-contents__link">Usage with Redux Toolkit</a><ul><li><a href="#typing-configurestore" class="table-of-contents__link">Typing <code>configureStore</code></a></li><li><a href="#matching-actions" class="table-of-contents__link">Matching Actions</a></li><li><a href="#typing-createslice" class="table-of-contents__link">Typing <code>createSlice</code></a></li><li><a href="#typing-createasyncthunk" class="table-of-contents__link">Typing <code>createAsyncThunk</code></a></li><li><a href="#typing-createentityadapter" class="table-of-contents__link">Typing <code>createEntityAdapter</code></a></li></ul></li><li><a href="#additional-recommendations" class="table-of-contents__link">Additional Recommendations</a><ul><li><a href="#use-the-react-redux-hooks-api" class="table-of-contents__link">Use the React Redux Hooks API</a></li><li><a href="#avoid-action-type-unions" class="table-of-contents__link">Avoid Action Type Unions</a></li></ul></li><li><a href="#resources" class="table-of-contents__link">Resources</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/introduction/getting-started">入门</a></li><li class="footer__item"><a class="footer__link-item" href="/tutorials/essentials/part-1-overview-concepts">教程</a></li><li class="footer__item"><a class="footer__link-item" href="/faq">常见问题</a></li><li class="footer__item"><a class="footer__link-item" href="/api/api-reference">API 文档</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">社区</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/0ZcbPKXt5bZ6au5t" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reactiflux Discord</a></li><li class="footer__item"><a href="http://stackoverflow.com/questions/tagged/redux" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a class="footer__link-item" href="/introduction/getting-started#help-and-discussion">Feedback</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">更多</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/camsong/redux-in-chinese" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item">
                <a href="https://www.netlify.com">
                  <img src="https://www.netlify.com/img/global/badges/netlify-color-accent.svg" alt="Deploys by Netlify">
                </a>
              </li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://redux.js.org/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_SRtH"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_TMUO themedImage--light_4Vu1 footer__logo"><img src="/img/redux.svg" alt="Redux Logo" class="themedImage_TMUO themedImage--dark_uzRr footer__logo"></a></div><div class="footer__copyright">Copyright © 2015–2022 Dan Abramov and Cam Song.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.9044bd3c.js"></script>
<script src="/assets/js/main.983ddc03.js"></script>
</body>
</html>